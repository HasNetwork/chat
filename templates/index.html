<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>HaS Chat</title>
		<link rel="icon" href="{{ url_for('static', filename='favicon.svg') }}" />
		<link
			rel="stylesheet"
			href="{{ url_for('static', filename='style.css') }}" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
			rel="stylesheet" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js"></script>
	</head>
	<body data-username="{{ current_user.username }}">
		<button id="menu-btn">â˜°</button>
		<div class="chat-container glass-panel">
			<aside class="sidebar" id="sidebar">
				<div id="room-list">
					<h3>Rooms</h3>
					<ul>
						{% for room in rooms %}
						<li onclick="joinRoom('{{ room }}')">{{ room }}</li>
						{% endfor %}
					</ul>
					<form id="new-room-form">
						<input
							type="text"
							id="new-room-input"
							placeholder="New room"
							autocomplete="off" />
						<button type="submit" id="join-btn" class="btn">Join</button>
					</form>
				</div>
				<div id="online-users">
					<h3>Online</h3>
					<ul>
						<!-- Online users will be populated by JavaScript -->
					</ul>
				</div>
				<div class="user-menu">
					<span>{{ current_user.username }}</span>
					{% if current_user.is_admin %}
					<a href="{{ url_for('main.admin') }}">Admin</a>
					{% endif %}
					<a href="{{ url_for('main.logout') }}">Logout</a>
				</div>
			</aside>
			<main class="main-chat">
				<div id="chat-window" class="chat-window">
					<!-- Messages will be appended here -->
				</div>
				<div id="global-seen-status" class="seen-status"></div>
				<div id="typing-indicator"></div>
				<div id="typing-indicator"></div>
				<div id="reply-indicator"></div>
				<div class="chat-input">
					<input type="hidden" id="reply-to" value="" />
					<input
						type="text"
						id="message-input"
						placeholder="Type a message..."
						autocomplete="off"
						disabled />
					<button id="send-button" class="btn" disabled>Send</button>
					<input type="file" id="file-input" style="display: none" />
					<button id="upload-button" class="btn" disabled>Upload</button>
				</div>
			</main>
		</div>
		<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
	</body>
</html>
